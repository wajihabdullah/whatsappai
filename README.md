# WhatsApp AI Assistant Backend

This repository contains the source code for a full-stack AI-powered chat assistant that integrates with WhatsApp. The application is designed to transform any WhatsApp account into a customizable, intelligent chatbot capable of handling conversations based on a configurable context.

This project was developed as a proof-of-concept to explore a real-world business problem: enabling small businesses to automate customer support on WhatsApp without the complexities of the official WhatsApp Business API.

**[Link to a Video Demo of the Application]** - *TODO*

-----

## üöÄ Core Features

  * **User Authentication:** Secure user registration and login system using JWT (JSON Web Tokens).
  * **WhatsApp Session Linking:** Simple, QR code-based system for users to link their own WhatsApp accounts.
  * **AI-Powered Conversations:** Integrates with **Azure OpenAI** to provide intelligent, human-like responses.
  * **Customizable AI Context:** Users can define a specific context or "persona" for their AI assistant (e.g., "You are a customer support agent for a shipping company..."). This allows for highly tailored conversational experiences.
  * **Conversation History:** The AI considers the recent conversation history to provide more relevant and contextual responses.
  * **Real-time, Asynchronous Communication:** Built to handle incoming messages and respond in real-time without blocking.

-----

## üèõÔ∏è System Architecture

The application utilizes a decoupled, multi-service architecture to achieve its functionality.

  * **Spring Boot Backend (This Repository):** The core of the application. It handles user management, business logic, and communication with the AI service. It's written in Java and built with the Spring Boot framework.
  * **Node.js / Baileys Service:** A separate microservice that directly interacts with WhatsApp. It uses the Baileys library to manage WhatsApp sessions, generate QR codes, listen for incoming messages, and send outgoing messages.
  * **Azure OpenAI:** The external AI service that provides the generative language capabilities for the chat assistant.

Here is a diagram illustrating the flow of communication:

1.  The user scans a QR code generated by the Node.js service to link their WhatsApp account.
2.  When a message is received on the linked WhatsApp number, the Node.js service forwards it to the Spring Boot backend via a webhook.
3.  The Spring Boot application processes the message, retrieves the conversation history and the user-defined chat context from its database.
4.  It then sends a request to the Azure OpenAI API with the complete prompt.
5.  Once OpenAI returns a response, the Spring Boot app saves the interaction and sends the AI-generated message back to the Node.js service.
6.  Finally, the Node.js service delivers the message to the user on WhatsApp.

-----

## üõ†Ô∏è Technology Stack

### Backend

  * **Java 17**
  * **Spring Boot 3**
      * **Spring MVC:** For REST API development.
      * **Spring Data JPA:** For database interaction.
      * **Spring Security:** For authentication and authorization.
  * **Hibernate:** As the JPA provider.
  * **H2 Database:** For development and testing (easily swappable for PostgreSQL/MySQL).
  * **JSON Web Tokens (JWT):** For stateless, secure authentication.
  * **Lombok:** To reduce boilerplate code.

### External Services

  * **Azure OpenAI:** For generative AI capabilities.
  * **Node.js + Baileys:** For unofficial WhatsApp API interaction.

### DevOps

  * **Maven:** For dependency management and build automation.
  * **Docker:** The application is containerized for easy deployment and scalability.

-----

## ‚öôÔ∏è Getting Started

To run this project locally, you will need to have the following installed:

  * JDK 17 or higher
  * Apache Maven
  * Docker and Docker Compose (Optional, for containerized deployment)
  * A running instance of the companion Node.js/Baileys service.

### Configuration(The Node.js backend is not included, project won't function without it!)

1.  **Clone the repository:**

    ```bash
    git clone [your-repo-url]
    cd whatsappai
    ```

2.  **Configure `application.properties`:**
    You will need to set up your database connection, Azure OpenAI credentials, and JWT secret key in the `src/main/resources/application.properties` file.

    ```properties
    # Server Port
    server.port=8080

    # H2 Database
    spring.h2.console.enabled=true
    spring.datasource.url=jdbc:h2:mem:whatsappdb
    spring.datasource.driverClassName=org.h2.Driver
    spring.datasource.username=sa
    spring.datasource.password=password
    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

    # Azure OpenAI
    azure.openai.endpoint=YOUR_AZURE_OPENAI_ENDPOINT
    azure.openai.api-key=YOUR_AZURE_OPENAI_API_KEY
    azure.openai.deployment-name=YOUR_DEPLOYMENT_NAME

    # JWT Secret
    jwt.secret=YOUR_SUPER_SECRET_KEY_FOR_JWT

    # Bailey's Node.js Service URL
    bailey-backend=http://localhost:4000
    node-secret=YOUR_SECRET_TO_COMMUNICATE_WITH_NODE_SERVICE
    ```

3.  **Run the application:**

    ```bash
    mvn spring-boot:run
    ```

-----

## ‚ö†Ô∏è Important Disclaimer: Project Status

This project is a **technical proof-of-concept and a portfolio piece**. It was built to demonstrate the ability to architect and develop a complex, full-stack application. For that reason I have not included the node.js backend server having the baileys library.

The use of automated libraries like Baileys to interact with WhatsApp is a direct violation of WhatsApp's Terms of Service. Any account using such automation is at risk of being **permanently banned** by WhatsApp.

**Therefore, this project is NOT intended for commercial use or for deployment as a public-facing service.** The risks to end-users are significant. The only officially supported and compliant method for building business solutions on WhatsApp is through the **WhatsApp Business Platform API**.
